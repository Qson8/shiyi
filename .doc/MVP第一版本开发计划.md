# 拾衣坊（Shiyi）MVP第一版本开发计划

## 一、版本目标

### 1.1 核心目标
- ✅ 验证核心价值：AI识别 + 衣橱管理 + 3D展示 + 知识库
- ✅ 获取种子用户：100+ 用户
- ✅ 关键指标：识别准确率 ≥85%，日活 ≥20%
- ✅ 开发周期：2-3周（10-15个工作日）

### 1.2 功能范围
**必须实现（P0）**：
1. 知识库基础功能（形制科普、历史背景）
2. 衣橱管理（添加/删除/分类/尺码记录）
3. 3D静态展示（3-5款核心形制，360°旋转查看）
4. 基础UI框架和导航

**暂不实现（后续版本）**：
- AI形制识别（需要模型训练，第二版本实现）
- AI穿搭推荐（需要算法设计，第二版本实现）

---

## 二、AI编码可行性分析

### 2.1 知识库功能 ✅ **完全可以通过AI编码实现**

#### 可行性评估：⭐⭐⭐⭐⭐（95%）

**可以AI编码的部分**：
- ✅ 数据模型定义（KnowledgeItem类）
- ✅ 数据库操作（Hive/SQLite集成）
- ✅ Repository模式实现
- ✅ 列表页面（卡片式布局）
- ✅ 详情页面（内容展示）
- ✅ 搜索功能（离线搜索）
- ✅ 收藏功能
- ✅ 数据初始化脚本（8种形制介绍内容）

**需要人工的部分**：
- ⚠️ 内容准确性验证（AI生成的内容需要人工审核）
- ⚠️ 内容格式调整（可能需要微调）

**AI编码提示词示例**：
```
请用Flutter和Hive生成一个汉服知识库功能，包含：

1. 数据模型：
   - id: String
   - title: String (形制名称)
   - category: String (形制科普/历史背景/穿搭指南)
   - content: String (详细介绍)
   - images: List<String> (相关图片路径)
   - tags: List<String>
   - isFavorite: bool

2. 功能要求：
   - 知识库列表页面（卡片式布局，支持分类筛选）
   - 详情页面（支持图片展示、收藏功能）
   - 搜索功能（支持标题和内容搜索）
   - 收藏管理
   - 使用Provider进行状态管理

3. 初始化数据：8种汉服形制介绍
   - 唐制齐胸襦裙
   - 唐制齐腰襦裙
   - 宋制褙子
   - 宋制百迭裙
   - 明制马面裙
   - 明制袄裙
   - 道袍
   - 褙子

请包含完整的代码、错误处理和单元测试。
```

**预计时间**：
- AI生成代码：0.5天
- 人工审核和微调：0.5天
- **总计：1天**

---

### 2.2 3D展示功能 ⚠️ **部分可以通过AI编码实现**

#### 可行性评估：⭐⭐⭐⭐（70%）

**可以AI编码的部分**：
- ✅ 3D查看器页面框架
- ✅ 基础交互控制（旋转、缩放按钮）
- ✅ 模型加载状态处理
- ✅ 错误处理（模型加载失败）
- ✅ 模型列表页面
- ✅ 路由集成

**需要人工的部分**：
- ✅ 3D模型资源已准备（hanfu-test.glb 可用作测试）
- ⚠️ 性能优化（低端设备适配）
- ⚠️ 复杂交互逻辑（手势控制优化）
- ⚠️ 模型资源管理（模型文件放置、路径配置）

**AI编码提示词示例**：
```
请用Flutter生成一个3D汉服展示功能，要求：

1. 使用flutter_3d_obj或model_viewer插件
2. 功能要求：
   - 3D模型查看器页面（全屏沉浸式）
   - 支持360°旋转查看
   - 支持双指缩放
   - 支持单指旋转
   - 显示加载状态
   - 错误处理（模型加载失败）
   - 返回按钮
   - 模型信息显示（形制名称、朝代）

3. 模型列表页面：
   - 显示可用的3D模型列表
   - 点击进入3D查看器
   - 支持搜索和筛选

4. 模型路径配置：
   - 支持从assets加载
   - 支持从本地文件系统加载

请使用Provider进行状态管理，包含完整的错误处理。
```

**预计时间**：
- AI生成代码：1天
- 人工集成3D模型资源：1-2天
- 性能优化和测试：1天
- **总计：3-4天**

**3D模型资源获取方案**：
1. ✅ **已有测试模型**：hanfu-test.glb（可直接使用）
2. **开源模型**（后续扩展）：从Sketchfab、CG模型网下载CC0协议的glTF/GLB格式模型
3. **AI生成**：使用BlenderGPT + Stable Diffusion 3D生成（需要人工优化）
4. **外包定制**：淘宝/猪八戒网定制（500-1000元/款）

---

## 三、详细开发计划

### 阶段一：项目基础搭建（第1-2天）

#### Day 1：项目初始化
**任务清单**：
- [ ] 配置Flutter项目依赖（Hive、Provider、路由等）
- [ ] 配置项目结构（models、services、screens、widgets）
- [ ] 配置主题（颜色、字体）
- [ ] 配置路由（使用go_router或auto_route）
- [ ] 配置本地存储（Hive初始化）

**AI辅助**：
- ✅ 可以AI生成项目结构
- ✅ 可以AI生成pubspec.yaml依赖配置
- ✅ 可以AI生成主题配置代码

**预计时间**：1天（AI辅助可缩短至0.5天）

---

#### Day 2：基础UI组件库
**任务清单**：
- [ ] 通用组件（AppCard、AppButton、LoadingIndicator）
- [ ] 空状态组件（EmptyState）
- [ ] 骨架屏组件（SkeletonLoader）
- [ ] 底部导航栏
- [ ] 顶部导航栏

**AI辅助**：
- ✅ 完全可以通过AI生成

**预计时间**：1天（AI辅助可缩短至0.5天）

---

### 阶段二：知识库功能开发（第3-4天）

#### Day 3：知识库数据层
**任务清单**：
- [ ] 数据模型定义（KnowledgeItem）
- [ ] Hive适配器
- [ ] Repository实现（CRUD操作）
- [ ] 数据初始化脚本（8种形制介绍）

**AI辅助**：
- ✅ 完全可以通过AI生成

**预计时间**：0.5天（AI生成）+ 0.5天（内容审核）= 1天

---

#### Day 4：知识库UI层
**任务清单**：
- [ ] 知识库列表页面（卡片式布局）
- [ ] 知识库详情页面
- [ ] 搜索功能
- [ ] 收藏功能
- [ ] 分类筛选

**AI辅助**：
- ✅ 完全可以通过AI生成

**预计时间**：1天（AI辅助可缩短至0.5天）

---

### 阶段三：衣橱管理功能开发（第5-7天）

#### Day 5：衣橱数据层
**任务清单**：
- [ ] 数据模型定义（HanfuItem）
- [ ] Hive适配器
- [ ] Repository实现（CRUD、筛选、搜索）

**AI辅助**：
- ✅ 完全可以通过AI生成

**预计时间**：0.5天

---

#### Day 6：衣橱UI层
**任务清单**：
- [ ] 衣橱列表页面（网格/列表切换）
- [ ] 添加/编辑汉服页面
- [ ] 删除功能（带确认）
- [ ] 基础分类筛选

**AI辅助**：
- ✅ 完全可以通过AI生成

**预计时间**：1天

---

#### Day 7：尺码记录功能
**任务清单**：
- [ ] 尺码记录表单
- [ ] 尺码数据模型
- [ ] 尺码展示页面

**AI辅助**：
- ✅ 完全可以通过AI生成

**预计时间**：0.5天

---

### 阶段四：3D展示功能开发（第8-11天）

#### Day 8：3D查看器基础
**任务清单**：
- [ ] 集成3D插件（flutter_3d_obj或model_viewer）
- [ ] 3D查看器页面框架
- [ ] 基础交互（旋转、缩放）
- [ ] 加载状态处理

**AI辅助**：
- ✅ 基础代码可以AI生成
- ⚠️ 需要人工调试和优化

**预计时间**：1天

---

#### Day 9-10：3D模型资源集成
**任务清单**：
- [ ] 将hanfu-test.glb复制到assets目录
- [ ] 配置pubspec.yaml的assets路径
- [ ] 配置模型路径（assets加载）
- [ ] 模型列表页面
- [ ] 模型信息展示

**AI辅助**：
- ✅ 模型资源已准备（hanfu-test.glb）
- ✅ 配置代码可以AI生成

**预计时间**：1天（模型资源已准备，节省1天）

---

#### Day 11：3D功能优化
**任务清单**：
- [ ] 性能优化（低端设备适配）
- [ ] 手势控制优化
- [ ] 错误处理完善
- [ ] 测试和调试

**AI辅助**：
- ⚠️ 需要人工测试和优化

**预计时间**：1天

---

### 阶段五：功能集成与测试（第12-13天）

#### Day 12：功能集成
**任务清单**：
- [ ] 页面路由集成
- [ ] 数据联动（知识库 ↔ 衣橱 ↔ 3D）
- [ ] 导航栏集成
- [ ] 统一错误处理

**预计时间**：1天

---

#### Day 13：测试与优化
**任务清单**：
- [ ] 功能测试
- [ ] 性能测试
- [ ] UI/UX优化
- [ ] Bug修复

**预计时间**：1天

---

### 阶段六：发布准备（第14-15天）

#### Day 14-15：发布准备
**任务清单**：
- [ ] 应用图标和启动页
- [ ] 应用名称和描述
- [ ] 权限配置
- [ ] 打包测试
- [ ] 应用商店准备

**预计时间**：2天

---

## 四、技术栈和依赖

### 4.1 核心依赖

```yaml
dependencies:
  flutter:
    sdk: flutter
  
  # 状态管理
  provider: ^6.1.1
  
  # 本地存储
  hive: ^2.2.3
  hive_flutter: ^1.1.0
  
  # 路由
  go_router: ^13.0.0
  
  # 3D展示
  model_viewer: ^1.3.0  # 或 flutter_3d_obj
  
  # UI组件
  cupertino_icons: ^1.0.6
  
  # 工具类
  path_provider: ^2.1.1
  shared_preferences: ^2.2.2
```

### 4.2 项目结构

```
lib/
├── main.dart
├── models/
│   ├── knowledge_item.dart
│   ├── hanfu_item.dart
│   └── size_record.dart
├── services/
│   ├── database_service.dart
│   ├── knowledge_repository.dart
│   └── wardrobe_repository.dart
├── screens/
│   ├── home/
│   │   └── home_screen.dart
│   ├── knowledge/
│   │   ├── knowledge_list_screen.dart
│   │   └── knowledge_detail_screen.dart
│   ├── wardrobe/
│   │   ├── wardrobe_list_screen.dart
│   │   └── wardrobe_edit_screen.dart
│   └── viewer/
│       ├── model_list_screen.dart
│       └── model_viewer_screen.dart
├── widgets/
│   ├── app_card.dart
│   ├── app_button.dart
│   ├── loading_indicator.dart
│   └── empty_state.dart
└── utils/
    ├── theme.dart
    └── constants.dart
```

---

## 五、AI编码实施策略

### 5.1 分阶段AI编码

#### 第一阶段：基础框架（Day 1-2）
**让AI生成**：
- 项目结构
- 依赖配置
- 主题配置
- 基础UI组件

#### 第二阶段：知识库（Day 3-4）
**让AI生成**：
- 完整的知识库功能代码
- 包括数据层和UI层

#### 第三阶段：衣橱管理（Day 5-7）
**让AI生成**：
- 完整的衣橱管理功能代码

#### 第四阶段：3D展示（Day 8-11）
**让AI生成**：
- 3D查看器基础代码
- 模型列表页面代码

### 5.2 AI编码工作流程

```
1. 准备详细的提示词
   ↓
2. AI生成代码
   ↓
3. 代码审查（人工）
   ↓
4. 功能测试
   ↓
5. Bug修复（AI辅助）
   ↓
6. 性能优化（人工）
```

---

## 六、风险与应对

### 6.1 技术风险

| 风险 | 影响 | 应对策略 |
|------|------|---------|
| 3D模型资源获取困难 | 中 | 优先使用开源模型，MVP阶段3-5款即可 |
| 3D性能问题 | 中 | 低端设备自动降级，仅保留静态展示 |
| AI生成代码质量问题 | 低 | 建立代码审查流程，关键逻辑人工验证 |
| 内容准确性 | 中 | AI生成内容必须人工审核 |

### 6.2 时间风险

| 风险 | 影响 | 应对策略 |
|------|------|---------|
| 3D模型集成耗时 | 中 | 提前准备模型资源，并行开发 |
| AI代码调试时间 | 低 | 预留20%缓冲时间 |
| 性能优化耗时 | 中 | MVP阶段优先保证功能，性能后续优化 |

---

## 七、成功标准

### 7.1 功能完整性
- ✅ 知识库：8种形制介绍完整，搜索和收藏功能正常
- ✅ 衣橱管理：添加/删除/分类/尺码记录功能正常
- ✅ 3D展示：3-5款模型可正常展示，交互流畅

### 7.2 性能标准
- ✅ 启动时间：≤2秒
- ✅ 页面切换：流畅无卡顿
- ✅ 3D加载：≤2秒（中端设备）
- ✅ 帧率：≥30fps（3D展示）

### 7.3 用户体验
- ✅ UI美观，符合设计规范
- ✅ 交互流畅，无明显Bug
- ✅ 离线功能正常

---

## 八、总结

### 8.1 AI编码可行性总结

| 功能模块 | AI编码可行性 | 预计节省时间 |
|---------|------------|------------|
| 知识库功能 | ⭐⭐⭐⭐⭐ (95%) | 50% |
| 衣橱管理 | ⭐⭐⭐⭐⭐ (95%) | 50% |
| 3D展示基础 | ⭐⭐⭐⭐ (70%) | 30% |
| 基础UI框架 | ⭐⭐⭐⭐⭐ (95%) | 60% |

### 8.2 开发时间估算

| 阶段 | 原始估算 | AI辅助后 | 节省时间 |
|------|---------|---------|---------|
| 项目基础 | 2天 | 1天 | 1天 |
| 知识库 | 2天 | 1天 | 1天 |
| 衣橱管理 | 3天 | 1.5天 | 1.5天 |
| 3D展示 | 4天 | 2.5天 | 1.5天 |
| 集成测试 | 2天 | 2天 | 0天 |
| 发布准备 | 2天 | 2天 | 0天 |
| **总计** | **15天** | **10天** | **5天** |

### 8.3 关键建议

1. ✅ **知识库功能**：完全可以AI编码，重点关注内容准确性
2. ✅ **3D展示功能**：基础代码可以AI生成，但需要提前准备模型资源
3. ✅ **分阶段实施**：先做知识库和衣橱管理，再做3D展示
4. ✅ **代码审查**：AI生成的代码必须经过人工审查
5. ✅ **提前准备**：3D模型资源需要提前准备，避免阻塞开发

---

> **结论**：借助AI编码，**知识库功能可以完全实现**，**3D展示功能可以大部分实现**（基础代码AI生成，模型资源需要人工准备）。预计可以节省30%的开发时间，同时保证代码质量。

